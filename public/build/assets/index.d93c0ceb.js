import{T as A,c as h,p as g,a as d,b as u,d as a,e as t,u as o,F as k,r as U,k as V,w as c,g as D,t as n,n as L,i as N}from"./main.44d3edf1.js";import{b as M}from"./breadcrumb.a2072d09.js";import{_ as j}from"./paginator.28e6f7d5.js";import{_ as b}from"./FormButton.b5bafa51.js";import{_ as f}from"./ButtonLoader.046f5f16.js";import{_ as F}from"./modal.9ee02198.js";import{_ as r}from"./FormGroup.a8d6311c.js";import"./FormLabel.6d5eca29.js";import"./FormInput.c8d17617.js";import"./error.8a473308.js";const H={class:"card shadow col-lg-10 mx-auto"},P={class:"card-body"},R={class:"table-responsive"},z={class:"table"},E=t("thead",null,[t("tr",null,[t("th",null,"User"),t("th",null,"Stop loss"),t("th",null,"Amount"),t("th",null,"Returns (Profit/Loss)"),t("th",null,"Type"),t("th",null,"Status"),t("th",null,"Asset"),t("th",null,"Asset Type"),t("th",null,"Date"),t("th",null,"Actions")])],-1),I={key:0},O={key:0},q=t("div",{else:""},"--",-1),G={key:1},J=t("tr",null,[t("td",{colspan:"10",class:"text-muted text-center"}," No trades found ")],-1),K=[J],Q={key:0,class:"d-flex justify-content-center"},W={class:"modal-body"},X=["onSubmit"],Y={class:"text-center"},rt={name:"index",props:{trades:Object},setup(x){const y=x,s=A({returns:"",asset:"",type:"",status:"",stop_loss:"",user:"",id:""}),m=h(()=>y.trades.data),T=h(()=>y.trades.links);g(null);const p=g(!1),C=i=>{let l=m.value.filter(_=>_.id==i)[0];s.returns=l.returns,s.amount=l.amount,s.type=l.type,s.status=l.status,s.stop_loss=l.stop_loss,s.asset=l.tradeable.name,s.user=l.user.first_name,s.id=l.id,p.value=!0},S=()=>{s.put(route("admin.trades.update",s.id))},w=i=>{Inertia.post(route("admin.trades.close",i),{},{onBefore:()=>confirm("Are you sure you want to close this trade?")})};return(i,l)=>{const _=D("Head");return d(),u(k,null,[a(_,{title:"Trades"}),a(M,{title:"Trades",crumbs:["Dashboard","Trades"]}),t("div",H,[t("div",P,[t("div",R,[t("table",z,[E,o(m).length?(d(),u("tbody",I,[(d(!0),u(k,null,U(o(m),(e,B)=>{var v;return d(),u("tr",{key:B},[t("td",null,n((v=e==null?void 0:e.user)==null?void 0:v.first_name),1),t("td",null,n(e.stop_loss),1),t("td",null,n(i.format_money(e.amount)),1),t("td",{class:L({"text-danger":e.returns<0,"text-success":e.returns>0})},n(i.format_money(e.returns)),3),t("td",null,n(e.type),1),t("td",null,n(e.status),1),t("td",null,n(e.tradeable.name),1),t("td",null,n(e.tradeable.type),1),t("td",null,n(new Date(e.created_at).toDateString()),1),t("td",null,[e.status=="active"?(d(),u("div",O,[a(b,{class:"btn btn-outline-primary btn-sm",onButtonClicked:$=>C(e.id)},{default:c(()=>[a(f,{text:"<i class='fa fa-edit'></i>"})]),_:2},1032,["onButtonClicked"]),a(b,{onButtonClicked:$=>w(e.id),class:"btn btn-outline-danger btn-sm ms-2"},{default:c(()=>[a(f,{text:"<i class='fa fa-times'></i>  Close",loading:o(s).processeing},null,8,["loading"])]),_:2},1032,["onButtonClicked"])])):V("",!0),q])])}),128))])):(d(),u("tbody",G,K))])]),o(m).length?(d(),u("div",Q,[a(j,{links:o(T)},null,8,["links"])])):V("",!0)])]),a(F,{title:"Modify Trade",open:p.value,onModalClosed:l[4]||(l[4]=e=>p.value=!1)},{default:c(()=>[t("div",W,[t("form",{class:"row",onSubmit:N(S,["prevent"])},[a(r,{class:"col-md-6",disabled:!0,name:"user",label:"User","model-value":o(s).user},null,8,["model-value"]),a(r,{class:"col-md-6",disabled:!0,name:"amount",label:"Amount","model-value":o(s).amount},null,8,["model-value"]),a(r,{class:"col-md-6",disabled:!0,name:"type",label:"Type","model-value":o(s).type},null,8,["model-value"]),a(r,{class:"col-md-6",disabled:!0,name:"status",label:"Status",modelValue:o(s).status,"onUpdate:modelValue":l[0]||(l[0]=e=>o(s).status=e)},null,8,["modelValue"]),a(r,{class:"col-md-6",disabled:!0,name:"asset",label:"Asset",modelValue:o(s).asset,"onUpdate:modelValue":l[1]||(l[1]=e=>o(s).asset=e)},null,8,["modelValue"]),a(r,{class:"col-md-6",disabled:!0,name:"stop_loss",label:"Stop Loss",modelValue:o(s).stop_loss,"onUpdate:modelValue":l[2]||(l[2]=e=>o(s).stop_loss=e)},null,8,["modelValue"]),a(r,{name:"returns",label:"Returns (Profit/Loss)",modelValue:o(s).returns,"onUpdate:modelValue":l[3]||(l[3]=e=>o(s).returns=e)},null,8,["modelValue"]),t("div",Y,[a(b,{type:"submit",class:"btn btn-outline-primary",disabled:o(s).processing},{default:c(()=>[a(f,{text:"Update Trade",loading:o(s).processing},null,8,["loading"])]),_:1},8,["disabled"])])],40,X)])]),_:1},8,["open"])],64)}}};export{rt as default};
