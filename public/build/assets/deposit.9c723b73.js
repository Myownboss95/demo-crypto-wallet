import{b as S}from"./breadcrumb.a2072d09.js";import{T as U,p as h,x as f,c as g,a as c,b as u,d,e as s,F as b,r as L,u as o,j as E,w,k as T,h as p,t as r,y as j,g as z,n as H,C as K,bF as q}from"./main.44d3edf1.js";import{_ as C}from"./FormGroup.a8d6311c.js";import{_ as I}from"./error.8a473308.js";import{_ as k}from"./FormButton.b5bafa51.js";import{_ as x}from"./ButtonLoader.046f5f16.js";import"./FormLabel.6d5eca29.js";import"./FormInput.c8d17617.js";const M={class:"card shadow-lg radius-20 col-lg-9 mx-auto"},O={class:"card-body"},P={class:"row align-items-center py-3"},Q={class:"col-md-6 border-end"},R={class:"row"},Y=["onClick"],G={class:"border p-4 w-100"},J=["src"],W={class:"col-12"},X={class:"col-md-6"},Z={class:"px-3"},ee={key:0,class:""},se=s("h4",null,"Instructions:",-1),te=s("ol",null,[s("li",null,"Click on any of the Coins"),s("li",null,"Enter Amount to deposit."),s("li",null,"Click on continue."),s("li",null,"Scan or copy the wallet address."),s("li",null," Transfer the amount to the wallet address you scanned or copied. "),s("li",null,"And finally click on complete deposit.")],-1),oe=[se,te],ae={key:1,class:"text-center"},le={class:"placeholder"},ne=["src"],de={class:"font-size-16 my-1"},ie=s("i",{class:"fa fa-copy"},null,-1),ce=[ie],re={class:"mt-3"},me=p(" Copy the wallet address or scan the Qrcode above and send the equivalent of "),ue=p(" worth of "),_e=p(" to the wallet address. "),xe={name:"deposit",props:{payment_methods:Array,validated:{type:Boolean,default:!1},data:{type:Object,default:{}}},setup(D){const n=D,e=U({method_id:"",amount:"",pay_with:"main",name:"",symbol:""}),i=h({});var _=h({});const A=(l,a,m)=>{n.validated?q("You cannot change method now. Refresh page."):(e.method_id=l,e.name=a,e.symbol=m,console.log(e),e.name,K.get(`https://api.coingecko.com/api/v3/simple/price?ids=${e.name}&vs_currencies=usd`).then(t=>{if(t.status==200)_.value=t.data;else throw I()}).catch(t=>{console.log(t)}))};f(()=>e.method_id,l=>{let a=n.payment_methods.filter((m,t)=>m.id==l);i.value=a[0]});const V=()=>{const l=parseFloat(e.usd),a=isNaN(l)?"":(l/_.value[e.name.toLowerCase()].usd).toFixed(4);e.amount=a},F=()=>{const l=parseFloat(e.amount),a=isNaN(l)?"":(l*_.value[e.name.toLowerCase()].usd).toFixed(2);e.usd=a},v=g(()=>e.method_id==""||n.validated);let y=h(!1);f(e.amount,l=>{y.value=l!==""});const $=g(()=>({...n,isAccountDisabled:y.value})),N=()=>{e.post(route("user.deposits.validate"))},B=()=>{e.post(route("user.deposits.store"))};return(l,a)=>{const m=z("Head");return c(),u(b,null,[d(m,{title:"Deposit"}),d(S,{title:"Deposit",crumbs:["Dashboard","Deposits","Deposit"]}),s("div",M,[s("div",O,[s("div",P,[s("div",Q,[s("div",R,[(c(!0),u(b,null,L(n.payment_methods,(t,pe)=>(c(),u("div",{class:H(["col-6 text-center my-2",{selected:o(e).method_id==t.id}]),onClick:he=>A(t.id,t.name,t.symbol)},[s("div",G,[s("img",{src:`/storage/payment_methods/${t.svg}`,alt:"",class:"img-fluid",style:{width:"100px",height:"100px"}},null,8,J),s("h6",null,r(t.name),1)])],10,Y))),256)),s("div",W,[d(C,{disabled:o(v),name:"amount",placeholder:"Amount",modelValue:o(e).amount,"onUpdate:modelValue":a[0]||(a[0]=t=>o(e).amount=t),class:"mt-2",onKeyup:F},null,8,["disabled","modelValue"]),d(C,{label:"Amount in USD",disabled:o($).isAccountDisabled,name:"amountUSD",placeholder:"Amount in USD",modelValue:o(e).usd,"onUpdate:modelValue":a[1]||(a[1]=t=>o(e).usd=t),class:"mt-2",onKeyup:V},null,8,["disabled","modelValue"]),n.validated?T("",!0):(c(),E(k,{key:0,disabled:o(v),class:"btn btn-outline-primary w-100",onButtonClicked:N},{default:w(()=>[d(x,{text:"Continue",loading:o(e).processing},null,8,["loading"])]),_:1},8,["disabled"]))])])]),s("div",X,[s("div",Z,[n.validated?(c(),u("div",ae,[s("div",le,[s("img",{src:`/storage/payment_methods/${i.value.image}`,alt:"",class:"w-100 img-fluid"},null,8,ne)]),s("strong",de,[p(r(i.value.wallet)+" ",1),s("span",{class:"ml-2",onClick:a[2]||(a[2]=t=>o(j)(i.value.wallet))},ce)]),s("p",re,[me,s("strong",null,r(parseFloat(o(e).amount))+r(i.value.symbol)+" or "+r(l.format_money(parseFloat(o(_)[o(e).name.toLowerCase()].usd*o(e).amount))),1),ue,s("strong",null,r(i.value.name),1),_e]),d(k,{class:"btn btn-outline-primary w-100 mt-3",onButtonClicked:B},{default:w(()=>[d(x,{text:"Complete Deposit",loading:o(e).processing},null,8,["loading"])]),_:1})])):(c(),u("div",ee,oe))])])])])])],64)}}};export{xe as default};
